<?xml version="1.0" encoding="UTF-8"?>
<chapter id="upgrade_guide">
	<?dbhtml dir="upgradeguide" filename="index.html" ?>
	<chapterinfo>
		<releaseinfo>$Id$</releaseinfo>
		<copyright>
			<year>2009</year>
			<holder>phpBB Group</holder>
		</copyright>
	</chapterinfo>
	<title>Upgrade Guide</title>
	<abstract>
		<para>Do you want to upgrade your phpBB2 forum to version 3.3? This chapter will tell and show you how it is done.</para>
	</abstract>
	<section id="upgrade2">
		<sectioninfo>
			<authorgroup>
				<author>
					<othername>Techie-Micheal</othername>
				</author>
			</authorgroup>
		</sectioninfo>
		<title>Upgrading from 2.0 to 3.3</title>
		<para>In order to allow administrators of phpBB2 boards to use phpBB3 and all of its features. There is a convertor packed with the default installation. The conversion framework is flexible and allows you to convert other bulletin board systems as well. Read more if you need help with converting your board to phpBB3</para>

		<para>The process is in the form of a PHP file, similar to the update file found in phpBB 2.0.x. The file will take you through wizard-like screens until your phpBB is running 3.3.x. Basic instructions and troubleshooting for doing this conversion are <ulink url="https://www.phpbb.com/community/docs/INSTALL.html#convert">here</ulink>.</para>

		<para>Warning: Be sure to backup both the database and the files before attempting to upgrade.</para>
	</section>

	<section id="upgrade3">
		<sectioninfo>
			<authorgroup>
				<author>
					<othername>Noxwizard</othername>
				</author>
			</authorgroup>
		</sectioninfo>
		<title>Upgrading from 3.0 to 3.3</title>
		<warning>
			<para>Upgrading to phpBB 3.3 will render previously installed MODifications and styles unusable.  If you have a custom logo, it will need to be redone after the upgrade.  See <ulink url="https://www.phpbb.com/support/docs/en/3.3/kb/article/how-to-change-your-board-logo/">Knowledge Base: How to Change your Board Logo</ulink>.</para>
		</warning>

		<para>phpBB 3.3 is not compatible with 3.0 and most of the previous files will need to be removed prior to upgrading.</para>
		<para>To upgrade, perform the following steps:</para>
		<orderedlist>
			<listitem><para>Ensure that your server meets the requirements for running phpBB 3.3: <xref linkend="quick_requirements" /></para></listitem>
			<listitem><para><emphasis role="bold">Make a backup of the original files</emphasis></para></listitem>
			<listitem><para><emphasis role="bold">Make a backup of the database</emphasis></para></listitem>
			<listitem><para>Deactivate all styles except for prosilver</para></listitem>
			<listitem><para>Remove all MOD-related changes from the database. The <ulink url="http://www.phpbb.com/support/stk/">Support Toolkit</ulink>'s Database Cleaner can be used for this.</para></listitem>
			<listitem><para>Set British English as the only language pack</para></listitem>
			<listitem><para>Download the phpBB 3.3 <ulink url="https://www.phpbb.com/downloads/#install">Full Package</ulink> archive</para></listitem>
			<listitem><para>Extract the contents of the archive to your computer and open the phpBB3 directory</para></listitem>
			<listitem><para>Delete the following files from the package:</para>
				<itemizedlist>
					<listitem><para>The config.php file</para></listitem>
					<listitem><para>The files/ directory</para></listitem>
					<listitem><para>The images/ directory</para></listitem>
					<listitem><para>The store/ directory</para></listitem>
				</itemizedlist>
			</listitem>
			<listitem><para>On your website, delete all files from your board <emphasis role="bold">EXCEPT</emphasis> for:</para>
				<itemizedlist>
					<listitem><para>The config.php file</para></listitem>
					<listitem><para>The files/ directory</para></listitem>
					<listitem><para>The images/ directory</para></listitem>
					<listitem><para>The store/ directory</para></listitem>
				</itemizedlist>
			</listitem>
			<listitem><para>Upload the contents of the phpBB3 directory from your computer to your forum's directory. You may be prompted to overwrite the remaining <emphasis>files</emphasis>. If prompted to merge or overwrite <emphasis>directories</emphasis>, choose to merge them.</para>
			</listitem>
			<listitem><para>Update the database:</para>
				<orderedlist>
					<tip>
						<para>For large boards, you may wish to update via the command line instead of using a web browser. From your board's root, execute the following command: <code>php ./bin/phpbbcli.php db:migrate --safe-mode</code></para>
					</tip>
					<listitem><para>Using your web browser, visit install/ in your board's root. (e.g. http://www.example.com/yourforum/install)</para></listitem>
					<listitem><para>Click the Update tab</para></listitem>
					<listitem><para>Click the Update button</para></listitem>
					<listitem><para>Select "Update database only" and click Submit</para></listitem>
					<listitem><para>Wait for the progress bar to reach 100% and for a message indicating that the update has completed</para></listitem>
				</orderedlist>
			</listitem>
			<listitem><para>Delete the install/ directory</para></listitem>
		</orderedlist>
		<note>
			<para>Ensure that the root level <emphasis>.htaccess</emphasis> file is included in the upload. Some FTP clients do not show files whose names start with a period and you may need to enable the display of hidden files.</para>
		</note>
		<note>
			<para>If your board made use of language packs other than British English, you will need to download a version that is compatible with phpBB 3.3 from <ulink url="https://www.phpbb.com/languages/">https://www.phpbb.com/languages/</ulink></para>
		</note>
		<important>
			<para>When uploading the 3.3 files to your server, do <emphasis role="bold">NOT</emphasis> overwrite your config.php.</para>
		</important>
		<important>
			<para>When backing up your files, ensure that your FTP client is in binary mode or transfers files without extensions in binary mode.</para>
			<para>For more information, see: <ulink url="https://www.phpbb.com/support/docs/en/3.0/kb/article/transferring-attachment-files-with-filezilla/">Knowledge Base: Transferring attachment files with Filezilla</ulink></para>
		</important>
	</section>

	<section id="upgrade31">
		<sectioninfo>
			<authorgroup>
				<author>
					<othername>Noxwizard</othername>
				</author>
			</authorgroup>
		</sectioninfo>
		<title>Upgrading from 3.1 to 3.3</title>
		<warning>
			<para>Upgrading to phpBB 3.3 may cause some extensions to no longer work. All styles will need to be updated, even if they give the appearance of working.  If you have a custom logo, it will need to be redone after the upgrade.  See <ulink url="https://www.phpbb.com/support/docs/en/3.3/kb/article/how-to-change-your-board-logo/">Knowledge Base: How to Change your Board Logo</ulink>.</para>
		</warning>

		<para>phpBB 3.3 is not completely backwards compatible with 3.1 and custom edits may no longer work. The easiest upgrade method is to remove all existing files prior to upgrading and re-applying custom changes after verifying their correctness.</para>
		<para>To upgrade, perform the following steps:</para>
		<orderedlist>
			<listitem><para>Ensure that your server meets the requirements for running phpBB 3.3: <xref linkend="quick_requirements" /></para></listitem>
			<listitem><para><emphasis role="bold">Make a backup of the original files</emphasis></para></listitem>
			<listitem><para><emphasis role="bold">Make a backup of the database</emphasis></para></listitem>
			<listitem><para>Deactivate all styles except for prosilver</para></listitem>
			<listitem><para>Deactivate any extensions which are not compatible with phpBB 3.3. Check with the extension author to find out if an extension is compatible or not.</para></listitem>
			<listitem><para>Set British English as the only language pack</para></listitem>
			<listitem><para>Download the phpBB 3.3 <ulink url="https://www.phpbb.com/downloads/#install">Full Package</ulink> archive</para></listitem>
			<listitem><para>Extract the contents of the archive to your computer and open the phpBB3 directory</para></listitem>
			<listitem><para>Delete the following files from the package:</para>
				<itemizedlist>
					<listitem><para>The config.php file</para></listitem>
					<listitem><para>The images/ directory</para></listitem>
					<listitem><para>The files/ directory</para></listitem>
					<listitem><para>The store/ directory</para></listitem>
				</itemizedlist>
			</listitem>
			<listitem><para>On your website, delete all files from your board <emphasis role="bold">EXCEPT</emphasis> for:</para>
				<itemizedlist>
					<listitem><para>The config.php file</para></listitem>
					<listitem><para>The ext/ directory</para></listitem>
					<listitem><para>The images/ directory</para></listitem>
					<listitem><para>The files/ directory</para></listitem>
					<listitem><para>The store/ directory</para></listitem>
				</itemizedlist>
			</listitem>
			<listitem><para>Upload the contents of the phpBB3 directory from your computer to your forum's directory. You may be prompted to overwrite the remaining <emphasis>files</emphasis>. If prompted to merge or overwrite <emphasis>directories</emphasis>, choose to merge them.</para>
			</listitem>
			<listitem><para>Update the database:</para>
				<orderedlist>
					<tip>
						<para>For large boards, you may wish to update via the command line instead of using a web browser. From your board's root, execute the following command: <code>php ./bin/phpbbcli.php db:migrate --safe-mode</code></para>
					</tip>
					<listitem><para>Using your web browser, visit install/ in your board's root. (e.g. http://www.example.com/yourforum/install)</para></listitem>
					<listitem><para>Click the Update tab</para></listitem>
					<listitem><para>Click the Update button</para></listitem>
					<listitem><para>Select "Update database only" and click Submit</para></listitem>
					<listitem><para>Wait for the progress bar to reach 100% and for a message indicating that the update has completed</para></listitem>
				</orderedlist>
			</listitem>
			<listitem><para>Delete the install/ directory</para></listitem>
		</orderedlist>
		<note>
			<para>Ensure that the root level <emphasis>.htaccess</emphasis> file is included in the upload. Some FTP clients do not show files whose names start with a period and you may need to enable the display of hidden files.</para>
		</note>
		<note>
			<para>If your board made use of language packs other than British English, you will need to download a version that is compatible with phpBB 3.3 from <ulink url="https://www.phpbb.com/languages/">https://www.phpbb.com/languages/</ulink></para>
		</note>
		<important>
			<para>When uploading the 3.3 files to your server, do <emphasis role="bold">NOT</emphasis> overwrite your config.php.</para>
		</important>
		<important>
			<para>When backing up your files, ensure that your FTP client is in binary mode or transfers files without extensions in binary mode.</para>
			<para>For more information, see: <ulink url="https://www.phpbb.com/support/docs/en/3.0/kb/article/transferring-attachment-files-with-filezilla/">Knowledge Base: Transferring attachment files with Filezilla</ulink></para>
		</important>
	</section>

	<section id="upgrade32">
		<sectioninfo>
			<authorgroup>
				<author>
					<othername>Marc</othername>
				</author>
			</authorgroup>
		</sectioninfo>
		<title>Upgrading from 3.2 to 3.3</title>
		<warning>
			<para>Upgrading to phpBB 3.3 may cause some styles and extensions to no longer work. If you have a custom logo, it might need to be redone after the upgrade. See <ulink url="https://www.phpbb.com/support/docs/en/3.3/kb/article/how-to-change-your-board-logo/">Knowledge Base: How to Change your Board Logo</ulink>.</para>
		</warning>

		<para>phpBB 3.3 should be backwards compatible with 3.2, however some extensions and custom edits may no longer work. The easiest upgrade method is to remove all existing files prior to upgrading and re-applying custom changes after verifying their correctness.</para>
		<para>To upgrade, perform the following steps:</para>
		<orderedlist>
			<listitem><para>Ensure that your server meets the requirements for running phpBB 3.3: <xref linkend="quick_requirements" /></para></listitem>
			<listitem><para><emphasis role="bold">Make a backup of the original files</emphasis></para></listitem>
			<listitem><para><emphasis role="bold">Make a backup of the database</emphasis></para></listitem>
			<listitem><para>Deactivate all styles except for prosilver</para></listitem>
			<listitem><para>Deactivate any extensions which are not compatible with phpBB 3.3. Check with the extension author to find out if an extension is compatible or not.</para></listitem>
			<listitem><para>Set British English as the only language pack</para></listitem>
			<listitem><para>Download the phpBB 3.3 <ulink url="https://www.phpbb.com/downloads/#install">Full Package</ulink> archive</para></listitem>
			<listitem><para>Extract the contents of the archive to your computer and open the phpBB3 directory</para></listitem>
			<listitem><para>Delete the following files from the package:</para>
				<itemizedlist>
					<listitem><para>The config.php file</para></listitem>
					<listitem><para>The files/ directory</para></listitem>
					<listitem><para>The images/ directory</para></listitem>
					<listitem><para>The store/ directory</para></listitem>
				</itemizedlist>
			</listitem>
			<listitem><para>On your website, delete all files from your board <emphasis role="bold">EXCEPT</emphasis> for:</para>
				<itemizedlist>
					<listitem><para>The config.php file</para></listitem>
					<listitem><para>The ext/ directory</para></listitem>
					<listitem><para>The files/ directory</para></listitem>
					<listitem><para>The images/ directory</para></listitem>
					<listitem><para>The store/ directory</para></listitem>
				</itemizedlist>
			</listitem>
			<listitem><para>Upload the contents of the phpBB3 directory from your computer to your forum's directory. You may be prompted to overwrite the remaining <emphasis>files</emphasis>. If prompted to merge or overwrite <emphasis>directories</emphasis>, choose to merge them.</para>
			</listitem>
			<listitem><para>Update the database:</para>
				<orderedlist>
					<tip>
						<para>For large boards, you may wish to update via the command line instead of using a web browser. From your board's root, execute the following command: <code>php ./bin/phpbbcli.php db:migrate --safe-mode</code></para>
					</tip>
					<listitem><para>Using your web browser, visit install/ in your board's root. (e.g. http://www.example.com/yourforum/install)</para></listitem>
					<listitem><para>Click the Update tab</para></listitem>
					<listitem><para>Click the Update button</para></listitem>
					<listitem><para>Select "Update database only" and click Submit</para></listitem>
					<listitem><para>Wait for the progress bar to reach 100% and for a message indicating that the update has completed</para></listitem>
				</orderedlist>
			</listitem>
			<listitem><para>Delete the install/ directory</para></listitem>
		</orderedlist>
		<note>
			<para>Ensure that the root level <emphasis>.htaccess</emphasis> file is included in the upload. Some FTP clients do not show files whose names start with a period and you may need to enable the display of hidden files.</para>
		</note>
		<note>
			<para>If your board made use of language packs other than British English, you will need to download a version that is compatible with phpBB 3.3 from <ulink url="https://www.phpbb.com/languages/">https://www.phpbb.com/languages/</ulink></para>
		</note>
		<important>
			<para>When uploading the 3.3 files to your server, do <emphasis role="bold">NOT</emphasis> overwrite your config.php.</para>
		</important>
		<important>
			<para>When backing up your files, ensure that your FTP client is in binary mode or transfers files without extensions in binary mode.</para>
			<para>For more information, see: <ulink url="https://www.phpbb.com/support/docs/en/3.0/kb/article/transferring-attachment-files-with-filezilla/">Knowledge Base: Transferring attachment files with Filezilla</ulink></para>
		</important>
	</section>

	<section id="minor">
		<sectioninfo>
			<authorgroup>
				<author>
					<othername>Noxwizard</othername>
				</author>
			</authorgroup>
		</sectioninfo>
		<title>Minor Updates Within 3.3.x</title>
		<note>
			<para>phpBB aims to be backwards compatible within minor releases, but if you are using extensions, language packs, or custom styles, you should check them for updates prior to updating phpBB.</para>
		</note>

		<para>There are several update paths available depending on the types of edits you have made to your board:</para>
		<orderedlist>
			<listitem><para><xref linkend="update_full" /></para><para>If you have made no modifications to core files, this is the easiest approach.</para></listitem>
			<listitem><para><xref linkend="update_changed" /></para><para>If you wish to only update the files that have changed between two releases, use this approach.</para></listitem>
			<listitem><para><xref linkend="update_advanced" /></para><para>If you have made modifications to core files and do not want to manually re-apply them, use this approach.</para></listitem>
			<listitem><para><xref linkend="update_patch" /></para><para>For those comfortable using the <command>patch</command> utility, patch files are available.</para></listitem>
		</orderedlist>


		<section id="update_full">
			<sectioninfo>
				<authorgroup>
					<author>
						<othername>Noxwizard</othername>
					</author>
				</authorgroup>
			</sectioninfo>
			<title>Full Package</title>
			<para>This update method will remove most existing files and then put the new ones in place.</para>
			<orderedlist>
				<listitem><para><emphasis role="bold">Make a backup of the original files</emphasis></para></listitem>
				<listitem><para><emphasis role="bold">Make a backup of the database</emphasis></para></listitem>
				<listitem><para>Download the phpBB 3.3 <ulink url="https://www.phpbb.com/downloads/3.3/install">Full Package</ulink> archive</para></listitem>
				<listitem><para>Extract the contents of the archive to your computer and open the <filename class="directory">phpBB3</filename> directory</para></listitem>
				<listitem><para>Delete the following files from the package:</para>
					<itemizedlist>
						<listitem><para>The <filename>config.php</filename> file</para></listitem>
						<listitem><para>The <filename class="directory">files/</filename> directory</para></listitem>
						<listitem><para>The <filename class="directory">images/</filename> directory</para></listitem>
						<listitem><para>The <filename class="directory">store/</filename> directory</para></listitem>
					</itemizedlist>
				</listitem>
				<listitem><para>On your website, delete all files from your board <emphasis role="bold">EXCEPT</emphasis> for:</para>
					<itemizedlist>
						<listitem><para>The <filename>config.php</filename> file</para></listitem>
						<listitem><para>The <filename class="directory">ext/</filename> directory</para></listitem>
						<listitem><para>The <filename class="directory">files/</filename> directory</para></listitem>
						<listitem><para>The <filename class="directory">images/</filename> directory</para></listitem>
						<listitem><para>The <filename class="directory">store/</filename> directory</para></listitem>
						<listitem><para>The <filename class="directory">styles/</filename> directory</para></listitem>
					</itemizedlist>
				</listitem>
				<listitem>
					<para>Upload the contents of the <filename class="directory">phpBB3</filename> directory from your computer to your forum's directory. You may be prompted to overwrite the remaining <emphasis>files</emphasis>. If prompted to merge or overwrite <emphasis>directories</emphasis>, choose to merge them.</para>
					<para>The <filename class="directory">docs/</filename> folder is for your personal use and it is not necessary to upload it to your forum.</para>
				</listitem>
				<listitem><para>Update the database:</para>
					<orderedlist>
						<important>
							<para>If you have previously attempted to update using a different method, you will need to remove the following files from the server before updating the database:
							<itemizedlist>
								<listitem><para><filename>store/install_config.php</filename></para></listitem>
								<listitem><para><filename>store/io_lock.lock</filename></para></listitem>
							</itemizedlist>
							</para>
						</important>
						<tip>
							<para>For large boards, you may wish to update via the command line instead of using a web browser. From your board's root, execute the following command: <code>php ./bin/phpbbcli.php db:migrate --safe-mode</code></para>
						</tip>
						<listitem>
							<para>Using your web browser, visit /install/app.php/update in your board's root (e.g. http://www.example.com/yourforum/install/app.php/update). You will see the following warning message:
							<emphasis role="bold">No valid update directory was found, please make sure you uploaded the relevant files.</emphasis> This is expected and not an error.</para>
						</listitem>
						<listitem><para>Select "Update database only" and click Submit</para></listitem>
						<listitem>
							<para>Wait for the progress bar to reach 100% and for a message indicating that the update has completed</para>
							<para>Depending on your previous version this will make a number of database changes. You may receive FAILURES during this procedure. They should not be a cause for concern unless you see an actual ERROR, in which case the script will stop (in this case you should seek help via our forums).</para>
						</listitem>
					</orderedlist>
				</listitem>
				<listitem><para>Delete the <filename class="directory">install/</filename> directory on the server</para></listitem>
			</orderedlist>
			<note>
				<para>Ensure that the root level <emphasis>.htaccess</emphasis> file is included in the upload. Some FTP clients do not show files whose names start with a period and you may need to enable the display of hidden files.</para>
			</note>
			<important>
				<para>When backing up your files via FTP, ensure that the client is in binary mode. If using Filezilla, ensure that the "transfer files without extensions" setting is set to "binary mode".</para>
				<para>For more information, see: <ulink url="https://www.phpbb.com/support/docs/en/3.0/kb/article/transferring-attachment-files-with-filezilla/">Knowledge Base: Transferring attachment files with Filezilla</ulink></para>
			</important>
		</section>

		<section id="update_changed">
			<sectioninfo>
				<authorgroup>
					<author>
						<othername>Noxwizard</othername>
					</author>
				</authorgroup>
			</sectioninfo>
			<title>Changed Files</title>
			<para>This method is meant for those wanting to only replace the files that were changed between a previous version and the latest version.</para>
			<para>This package contains a number of sub-archives, each contains the files changed from a given release to the latest version. You should select the appropriate archive for your current version, e.g. if you currently have 3.3.0 and are updating to 3.3.1, you should select the phpBB-3.3.0_to_3.3.1.zip/tar.bz2 sub-archive.</para>
			<orderedlist>
				<listitem><para><emphasis role="bold">Make a backup of the original files</emphasis></para></listitem>
				<listitem><para><emphasis role="bold">Make a backup of the database</emphasis></para></listitem>
				<listitem><para>Locally, perform for the following steps:</para>
					<orderedlist>
						<listitem><para>Download the phpBB 3.3 <ulink url="https://www.phpbb.com/downloads/3.3/changedfiles">Changed Files</ulink> archive</para></listitem>
						<listitem><para>Extract the <filename class="directory">install/</filename> directory</para></listitem>
						<listitem><para>Extract the <filename class="directory">vendor/</filename> directory</para></listitem>
						<listitem><para>Extract the contents of the desired sub-archive for your version</para></listitem>
					</orderedlist>
				</listitem>
				<listitem><para>On your web server, delete the <filename class="directory">vendor/</filename> directory</para></listitem>
				<listitem><para>Upload the <filename class="directory">install/</filename> directory</para></listitem>
				<listitem><para>Upload the <filename class="directory">vendor/</filename> directory</para></listitem>
				<listitem><para>Upload the contents of the selected sub-archive</para></listitem>
				<listitem><para>Update the database:</para>
					<orderedlist>
						<important>
							<para>If you have previously attempted to update using a different method, you will need to remove the following files from the server before updating the database:
							<itemizedlist>
								<listitem><para><filename>store/install_config.php</filename></para></listitem>
								<listitem><para><filename>store/io_lock.lock</filename></para></listitem>
							</itemizedlist>
							</para>
						</important>
						<tip>
							<para>For large boards, you may wish to update via the command line instead of using a web browser. From your board's root, execute the following command: <code>php ./bin/phpbbcli.php db:migrate --safe-mode</code></para>
						</tip>
						<listitem>
							<para>Using your web browser, visit /install/app.php/update in your board's root (e.g. http://www.example.com/yourforum/install/app.php/update). You will see the following warning message:
							<emphasis role="bold">No valid update directory was found, please make sure you uploaded the relevant files.</emphasis> This is expected and not an error.</para>
						</listitem>
						<listitem><para>Select "Update database only" and click Submit</para></listitem>
						<listitem>
							<para>Wait for the progress bar to reach 100% and for a message indicating that the update has completed</para>
							<para>Depending on your previous version this will make a number of database changes. You may receive FAILURES during this procedure. They should not be a cause for concern unless you see an actual ERROR, in which case the script will stop (in this case you should seek help via our forums).</para>
						</listitem>
					</orderedlist>
				</listitem>
				<listitem><para>Delete the <filename class="directory">install/</filename> directory on the server</para></listitem>
			</orderedlist>
		</section>

		<section id="update_advanced">
			<sectioninfo>
				<authorgroup>
					<author>
						<othername>Noxwizard</othername>
					</author>
				</authorgroup>
			</sectioninfo>
			<title>Advanced Update (Expert users)</title>
			<para>This update method should only be used for installations with modifications to core phpBB files. If you simply use Extensions or custom Styles and have not modified core files, please use the Full Package update.</para>
			<para>This update was renamed from Automatic Update to Advanced Update to more clearly state that it should only be used by advanced users.</para>
			<para>This package detects changed files and merges in changes if needed. Since this type of update has a potential to cause issues while upgrading, it is not recommended being used for updates and/or upgrades.</para>
			<para>A number of advanced update files are available, and you should choose the one that corresponds to the version of the board that you are currently running. For example, if your current version is 3.3.0 and you are updating to 3.3.1, you need the phpBB-3.3.0_to_3.3.1.zip/tar.bz2 file.</para>
			<orderedlist>
				<listitem><para><emphasis role="bold">Make a backup of the original files</emphasis></para></listitem>
				<listitem><para><emphasis role="bold">Make a backup of the database</emphasis></para></listitem>
				<listitem><para>Locally, perform for the following steps:</para>
					<orderedlist>
						<listitem><para>Download the phpBB 3.3 <ulink url="https://www.phpbb.com/downloads/3.3/update">Advanced Update</ulink> archive</para></listitem>
						<listitem><para>Extract the <filename class="directory">install/</filename> directory</para></listitem>
						<listitem><para>Extract the <filename class="directory">vendor/</filename> directory</para></listitem>
					</orderedlist>
				</listitem>
				<listitem><para>On your web server, delete the <filename class="directory">vendor/</filename> directory</para></listitem>
				<listitem><para>Upload the <filename class="directory">install/</filename> directory</para></listitem>
				<listitem><para>Upload the <filename class="directory">vendor/</filename> directory</para></listitem>
				<listitem><para>Run the updater:</para>
					<orderedlist>
						<important>
							<para>If you have previously attempted to update using a different method, you will need to remove the following files from the server before updating the database:
							<itemizedlist>
								<listitem><para><filename>store/install_config.php</filename></para></listitem>
								<listitem><para><filename>store/io_lock.lock</filename></para></listitem>
							</itemizedlist>
							</para>
						</important>
						<tip>
							<para>For large boards, you may wish to update the database via the command line instead of using a web browser. From your board's root, execute the following command: <code>php ./bin/phpbbcli.php db:migrate --safe-mode</code></para>
						</tip>
						<listitem><para>Using your web browser, visit /install in your board's root (e.g. http://www.example.com/yourforum/install).</para></listitem>
						<listitem><para>Click the Update tab</para></listitem>
						<listitem><para>Click Update</para></listitem>
						<listitem><para>Select "Update filesystem and database" and click Submit</para></listitem>
						<listitem>
							<para>Depending on file ownership, there are several options available to perform this update:
								<itemizedlist>
									<listitem><para><emphasis role="bold">Download modified files in an archive:</emphasis> This will generate an archive containing all of the updated files. After downloading it, you upload its contents to the server.</para></listitem>
									<listitem><para><emphasis role="bold">Update files via FTP (Automatic):</emphasis> You provide FTP credentials and file paths so that the server may FTP the files in place.</para></listitem>
									<listitem><para><emphasis role="bold">Update files via direct access (Automatic):</emphasis> If the web server has write permissions, the updater can write the changes directly to the files</para></listitem>
								</itemizedlist>
							</para>
							<para>If there are conflicts, you will be prompted to resolve them.</para>
						</listitem>
						<listitem><para>Click Update Files</para></listitem>
						<listitem><para>Click "Continue Update Process" to update the database</para></listitem>
					</orderedlist>
				</listitem>
				<listitem><para>Delete the <filename class="directory">install/</filename> directory on the server</para></listitem>
			</orderedlist>
		</section>

		<section id="update_patch">
			<sectioninfo>
				<authorgroup>
					<author>
						<othername>Noxwizard</othername>
					</author>
				</authorgroup>
			</sectioninfo>
			<title>Patch Files</title>
			<para>This method is for advanced users who wish to use a patch/diff style update process. If you don't know what the <command>patch</command> utility is, this method is not for you.</para>
			<para>A number of patch files are provided and you should choose the one that corresponds to the version of the board that you are currently running. For example, if your current version is 3.3.0 and you are updating to 3.3.1, you need the phpBB-3.3.0_to_3.3.1.patch file.</para>
			<orderedlist>
				<listitem><para><emphasis role="bold">Make a backup of the original files</emphasis></para></listitem>
				<listitem><para><emphasis role="bold">Make a backup of the database</emphasis></para></listitem>
				<listitem><para>Locally, perform for the following steps:</para>
					<orderedlist>
						<listitem><para>Download the phpBB 3.3 <ulink url="https://www.phpbb.com/downloads/3.3/patch">Patch Files</ulink> archive</para></listitem>
						<listitem><para>Extract the <filename class="directory">install/</filename> directory</para></listitem>
						<listitem><para>Extract the <filename class="directory">vendor/</filename> directory</para></listitem>
						<listitem><para>Extract the desired patch file for your version</para></listitem>
					</orderedlist>
				</listitem>
				<listitem><para>On your web server, delete the <filename class="directory">vendor/</filename> directory</para></listitem>
				<listitem><para>Upload the <filename class="directory">install/</filename> directory</para></listitem>
				<listitem><para>Upload the <filename class="directory">vendor/</filename> directory</para></listitem>
				<listitem><para>Upload the patch file to the parent directory containing the phpBB core files (i.e. index.php, viewforum.php, etc.). With this done you should run the following command:
					<code>patch -cl -d [PHPBB DIRECTORY] -p1 &lt; [PATCH NAME]</code> (where PHPBB DIRECTORY is the directory name your phpBB Installation resides in, for example phpBB, and where PATCH NAME is the relevant filename of the selected patch file).
					This should complete quickly, hopefully without any HUNK FAILED comments.</para>
					<para>If you do get failures, you should look at using the <ulink url="https://area51.phpbb.com/code-changes/">Code Changes</ulink> page to update the files which failed to patch. Alternatively, if you know how, you can examine the .rej files to determine what failed where and make manual adjustments to the relevant source.</para>
				</listitem>
				<listitem><para>Update the database:</para>
					<orderedlist>
						<important>
							<para>If you have previously attempted to update using a different method, you will need to remove the following files from the server before updating the database:
							<itemizedlist>
								<listitem><para><filename>store/install_config.php</filename></para></listitem>
								<listitem><para><filename>store/io_lock.lock</filename></para></listitem>
							</itemizedlist>
							</para>
						</important>
						<tip>
							<para>For large boards, you may wish to update via the command line instead of using a web browser. From your board's root, execute the following command: <code>php ./bin/phpbbcli.php db:migrate --safe-mode</code></para>
						</tip>
						<listitem>
							<para>Using your web browser, visit /install/app.php/update in your board's root (e.g. http://www.example.com/yourforum/install/app.php/update). You will see the following warning message:
							<emphasis role="bold">No valid update directory was found, please make sure you uploaded the relevant files.</emphasis> This is expected and not an error.</para>
						</listitem>
						<listitem><para>Select "Update database only" and click Submit</para></listitem>
						<listitem>
							<para>Wait for the progress bar to reach 100% and for a message indicating that the update has completed</para>
							<para>Depending on your previous version this will make a number of database changes. You may receive FAILURES during this procedure. They should not be a cause for concern unless you see an actual ERROR, in which case the script will stop (in this case you should seek help via our forums).</para>
						</listitem>
					</orderedlist>
				</listitem>
				<listitem><para>Delete the <filename class="directory">install/</filename> directory on the server</para></listitem>
				<listitem><para>Delete the uploaded patch file from the server</para></listitem>
			</orderedlist>
		</section>
	</section>

	<section id="upgrade_general">
		<sectioninfo>
			<authorgroup>
				<author>
					<othername>Dicky</othername>
				</author>
				<author>
					<othername>ameeck</othername>
				</author>
			</authorgroup>
		</sectioninfo>
		<title>Upgrading from any board software to phpBB3</title>
		<para>In order to allow administrators of phpBB2 boards to use phpBB3 and all of its features. There is a convertor packed with the default installation. The conversion framework is flexible and allows you to convert other bulletin board systems as well. Read more if you need help with converting your board to phpBB3</para>
		<note><para>The convertor will not harm the database of the board software you are converting from. In case of a problem, your old board software will still be fully operational.</para></note>
			<section id="upgrade_general_requirements">
				<sectioninfo>
					<authorgroup>
						<author>
							<othername>Dicky</othername>
						</author>
						<author>
							<othername>ameeck</othername>
						</author>
					</authorgroup>
				</sectioninfo>
				<title>Requirements</title>
				<para>In order for the conversion to be smooth as possible, check and prepare these items. You will need them to perform a succesful conversion.</para>
				<itemizedlist>
					<listitem><para>An installation of phpBB3 has to be present on your server. See <xref linkend="quick_requirements" /> for more information on how to install phpBB3.</para></listitem>
					<listitem><para>Prepare the connection details to the database where the old board was stored. If you are unsure, you can find these details in the config file.</para></listitem>
					<listitem><para>Make sure the old forum is still installed on your server alongside the phpBB3 installations. The files of the old board should be kept as is, some of them will be transferred to phpBB3 (e.g. avatars, attachments, smilies or ranks).</para></listitem>
					<listitem><para>The files and database need to be on the same server as the phpBB3 installation and the files need to be in the same domain. If you are using subdomains, the files need to be in the same subdomain.</para></listitem>
				</itemizedlist>
			</section>
			<section id="upgrade_general_preliminary">
				<sectioninfo>
					<authorgroup>
						<author>
							<othername>Dicky</othername>
						</author>
						<author>
							<othername>ameeck</othername>
						</author>
					</authorgroup>
				</sectioninfo>
				<title>Preliminary steps</title>
				<para>phpBB3 needs to be installed. Once phpBB3 is installed, do <emphasis>not</emphasis> delete the <filename class="directory">install</filename> directory if you will be converting immediately. If you will be testing and setting up your phpBB3 board prior to the conversion and converting at a later time, rename the <filename class="directory">install</filename> directory to something like _install. This will allow you to use your phpBB3 board. You will be needing the install directory later for the conversion.</para>

				<para>You will need specific convertor files for the board software you are converting from. The phpBB2 specific convertor files are included with the phpBB3 installation files. For other board softwares, you will need to get the convertor files from the appropriate phpBB3 convertor topic. These topics can be found in the <ulink url="https://www.phpbb.com/community/viewforum.php?f=666">[3.3.x] Convertors forum</ulink> on phpBB.com</para>

				<para>For converting from phpBB2, you only need to point your browser to {phpBB3_root_directory}/install, click the <guilabel>Convert</guilabel> tab and follow the instructions. For other board softwares, you will need to upload the convertor files to the appropriate directories. The convertor files you get will consist of two or three files, convert_xxx.php, functions_xxx.php and, optionally, auth_xxx.php. The xxx will generally be the name of the software you are converting from.</para>

			</section>

			<section id="upgrade_general_conversion">
				<sectioninfo>
					<authorgroup>
						<author>
							<othername>Dicky</othername>
						</author>
						<author>
							<othername>ameeck</othername>
						</author>
					</authorgroup>
				</sectioninfo>
				<title>Conversion steps</title>
				<para>After preparing everything, follow these steps to convert your board:</para>
				<orderedlist>
					<listitem><para>Install phpBB3. The old message board and the phpBB3 board need to be installed on the same server.</para></listitem>
					<listitem><para>If you are converting from a board other than phpBB2, upload the convertor files which you downloaded from the appropriate topic in the <ulink url="https://www.phpbb.com/community/viewforum.php?f=666">[3.3.x] Convertors forum</ulink>.</para></listitem>
					<listitem><para>Point your browser to {phpbb_root_directory}/install, click the <guilabel>Convert</guilabel> tab and select the appropriate convertor from the list of available convertors.</para></listitem>
					<listitem><para>Next you will be asked for database information. The database information you are being asked for, is for the database that holds the tables for the board software you are converting from. You will be presented with an option for <guilabel>Refresh page to continue conversion</guilabel> The default is set to <guilabel>Yes</guilabel>. Normally, you will want to leave it at <guilabel>Yes</guilabel>. The <guilabel>No</guilabel> option is mainly for test purposes.</para></listitem>
					<listitem><para>After entering the database information and pressing the <guilabel>Begin conversion</guilabel> button, the convertor will verify that you have entered the correct information. If the information is confirmed, you will have another <guilabel>Begin Conversion</guilabel> button.</para></listitem>
					<listitem><para>After you click the <guilabel>Begin Conversion</guilabel> button, the convertor will check the convertor files.
If everything is okay, you will be presented with a <guilabel>Continue Conversion</guilabel> button.</para></listitem>
					<listitem><para>The convertor will now proceed to convert your old board. Pages will be displayed informing you about the progress of the conversion.</para></listitem>
					<listitem><para>When the convertor is finished, you will see a message that the Search Index has not been converted. You must go into the Administration Control Panel and build the <guilabel>Search Index</guilabel>. In the <acronym>ACP</acronym>, click the <guilabel>Maintenance</guilabel> tab and select <guilabel>Search Index</guilabel> from the submenu. The default search backend index is <guilabel>Fulltext native</guilabel> and will be marked active. This is normally the index that you want to use to create your search index. For more information about search indexing, see <xref linkend="acp_maintenance_search" /></para></listitem>
					<listitem><para>You should now check your phpBB3 board for proper operation, that permissions are set correctly and forums &amp; posts are displaying correctly. Also make sure files got copied from the old location, for example avatars and smilies and attachments (if you have them.)</para></listitem>
				</orderedlist>
			</section>

	</section>
</chapter>
